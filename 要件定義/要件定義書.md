# 要件定義書

- [要件定義書](#要件定義書)
  - [**1. アプリケーション概要**](#1-アプリケーション概要)
  - [**2. 機能要件**](#2-機能要件)
    - [**2.1 食事情報管理**](#21-食事情報管理)
    - [**2.2 運動状況管理**](#22-運動状況管理)
  - [**3. 非機能要件**](#3-非機能要件)
    - [**3.1 性能要件**](#31-性能要件)
    - [**3.2 可用性要件**](#32-可用性要件)
    - [**3.3 セキュリティ要件**](#33-セキュリティ要件)
  - [**4. AWS 構成案**](#4-aws-構成案)
    - [**4.1 フロントエンド**](#41-フロントエンド)
    - [**4.2 バックエンド**](#42-バックエンド)
    - [**4.3 データストレージ**](#43-データストレージ)
    - [**4.4 分析・改善提案**](#44-分析改善提案)
    - [**4.5 その他のサービス**](#45-その他のサービス)
  - [**5. 開発環境**](#5-開発環境)
    - [**5.1 フロントエンド**](#51-フロントエンド)
    - [**5.2 バックエンド**](#52-バックエンド)
    - [**5.3 その他ツール**](#53-その他ツール)
  - [**6. テスト**](#6-テスト)
  - [**7. 運用保守**](#7-運用保守)

## **1. アプリケーション概要**

ユーザーの日々の食事情報および運動状況を記録・分析し、健康的な生活をサポートする Web アプリおよび Android アプリを提供します。AWS を活用して効率的かつスケーラブルなインフラを構築します。

---

## **2. 機能要件**

### **2.1 食事情報管理**

1. **食事情報の登録**

   - 食べたもの（食品名、分量）を手動入力。
   - カロリー・成分データを自動取得（食品データベースとの連携）。
   - 登録済みの食事履歴を閲覧・参照。

2. **食事傾向の分析**

   - 食事内容の傾向をグラフや統計データで可視化。
   - 栄養素の摂取量を日・週・月単位で集計。

3. **栄養バランスの改善提案**
   - 栄養素の過不足を分析。
   - 偏りがある場合、改善案（推奨食品や献立）を提示。

### **2.2 運動状況管理**

1. **運動データの登録**

   - 運動内容（種目、時間）を手動入力。
   - 行動量（歩数、消費カロリー）の入力・自動同期（歩数計や Google Fit API 連携）。

2. **運動量の分析**

   - 日々の運動データをグラフで表示。
   - 食事情報との統合による消費カロリー分析。

3. **行動改善提案**
   - 食事と運動のバランスを評価。
   - 運動不足を検知し、推奨される運動量を提案。

---

## **3. 非機能要件**

### **3.1 性能要件**

- **同時接続数**: 最大 1,000 ユーザーを想定。
- **レスポンスタイム**: API 呼び出しの応答時間を 1 秒以内に抑える。

### **3.2 可用性要件**

- **SLA**: 99.9%以上の稼働率を確保。

### **3.3 セキュリティ要件**

- ユーザーデータは暗号化（データ保存時は AES、通信時は TLS を使用）。
- IAM ポリシーを用いた権限管理。

---

## **4. AWS 構成案**

### **4.1 フロントエンド**

- **Web アプリケーション**: SPA (Single Page Application) を React.js および Next.js で構築。静的ファイル（HTML, CSS, JavaScript）を AWS S3 でホスティング。
- **Android アプリ**: Google Play に公開。

### **4.2 バックエンド**

- **API サーバー**:

  - Spring Boot アプリケーションを EC2 インスタンスまたは ECS/Fargate でホスト。
  - ALB（Application Load Balancer）を使用してリクエストを API サーバーにルーティング。
  - HTTPS を ALB で終端し、セキュアな通信を確保。

- **データベース**: Amazon RDS (PostgreSQL) または DynamoDB。
- **食品データ管理**: 食品 API（例: USDA データベース）との連携。

### **4.3 データストレージ**

- **食事・運動情報**: Amazon RDS。
- **ユーザーメディア（画像、記録ファイル）**: Amazon S3。

### **4.4 分析・改善提案**

- **データ処理**: AWS Glue / AWS Lambda。
- **機械学習（改善案生成）**: Amazon SageMaker を利用。

### **4.5 その他のサービス**

- **認証**: Amazon Cognito（ユーザー認証と管理）。
- **ログ管理**: Amazon CloudWatch。
- **CDN**: Amazon CloudFront。

---

## **5. 開発環境**

### **5.1 フロントエンド**

- **フレームワーク**: React.js + Next.js
  - SPA（Single Page Application）として構築し、クライアントサイドレンダリングを採用。
  - **API 連携**: Axios または Fetch API を使用してバックエンドと通信。
  - **ルーティング**: Next.js を利用して動的ルーティングを実現。

### **5.2 バックエンド**

- **言語**: Java
- **フレームワーク**: Spring Boot
  - RESTful API の構築とスケーラビリティの確保。
  - **セキュリティ**: Spring Security による認証・認可機能。
  - **データベースアクセス**: Spring Data JPA を使用し、RDBMS（Aurora）と連携。

### **5.3 その他ツール**

- **ビルドツール**: Maven または Gradle
- **テストフレームワーク**:
  - フロントエンド: Jest / React Testing Library
  - バックエンド: JUnit / Mockito

---

## **6. テスト**

- **ユニットテスト**: フロントエンドとバックエンド両方で実施。
- **負荷テスト**: AWS Load Testing Tool で最大同時接続数を検証。
- **セキュリティテスト**: OWASP ZAP を活用。

---

## **7. 運用保守**

- **アラート設定**: CloudWatch によるエラーログ・メトリクス監視。
- **バックアップ**: RDS 自動バックアップ設定（保存期間：7 日）。
- **スケール対応**: AWS Auto Scaling。

---
